---
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';

const posts = await getCollection('posts');

---

<!-- âœ… Blog index rendering via content collections -->
<Layout title="Blog">
  <section class="space-y-8 px-2 md:px-0">
    {posts.map(post => (
      <div>
        <div class="flex items-center gap-2 mb-1 animate-pulse">
          <span class="text-[--neon-green] font-mono text-base select-none">$</span>
          <span class="text-[--ascii-color] font-mono text-xs md:text-sm opacity-80 select-none">cat {post.slug}.md</span>
        </div>
        <article class="border-2 border-[--border-color] bg-black/80 text-[--ascii-color] font-mono p-4 rounded-xl shadow-md hover:shadow-[0_0_15px_var(--border-color)] transition duration-300 backdrop-blur-sm">
          <header class="mb-2">
            <h2 class="text-lg md:text-xl font-bold">
              <a href={post.slug ? `/blog/${post.slug}/` : '#'} class="hover:underline text-[--neon-green]">
                {post.data.title}
              </a>
            </h2>
            <time class="block text-xs md:text-sm opacity-70">{post.data.pubDate}</time>
          </header>
          <p class="text-xs md:text-sm leading-relaxed">{post.data.description}</p>
        </article>
      </div>
    ))}
  </section>
</Layout>
