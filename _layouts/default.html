<html lang="{{ page.lang | default: site.lang | default: "en-US" }}">
  {%- include head.html -%}
  <body class="{{ page.layout }}{% if page.sidebar %} with-sidebar{% endif %}">
    <header class="site-header" role="banner" style="background-color: #0073e6; color: white; padding: 20px;">
      <div class="wrapper" style="display: flex; justify-content: space-between; align-items: center;">
        <h1 class="site-title" style="margin: 0; font-size: 2rem;">
          <a href="{{ "/" | relative_url }}" style="color: white; text-decoration: none;">{{ site.title }}</a>
        </h1>
        {%- if site.description -%}
        <p class="site-description" style="margin: 0; font-size: 1rem;">{{ site.description }}</p>
        {%- endif -%}
        <nav class="site-nav">
          <ul class="site-nav-list" style="list-style: none; display: flex; gap: 15px; margin: 0; padding: 0;">
            <li class="site-nav-item"><a href="{{ "/" | relative_url }}" style="color: white; text-decoration: none;">Home</a></li>
            <li class="site-nav-item"><a href="{{ "/library/" | relative_url }}" style="color: white; text-decoration: none;">Prompt Library</a></li>
          </ul>
        </nav>
      </div>
    </header>

    <main class="page-content" aria-label="Content" style="padding: 20px;">
      <div class="wrapper">
        {{ content }}
      </div>
    </main>

    <footer class="site-footer h-card" role="contentinfo" style="background-color: #f9f9f9; padding: 20px; text-align: center;">
      <div class="wrapper">
        {%- include footer.html -%}
      </div>
    </footer>

    <script>
      document.addEventListener('DOMContentLoaded', () => {
        // Set up the scene, camera, and renderer
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer();
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.prepend(renderer.domElement);

        // Create a rotating cube
        const geometry = new THREE.BoxGeometry();
        const material = new THREE.MeshBasicMaterial({ color: 0x0073e6 });
        const cube = new THREE.Mesh(geometry, material);
        scene.add(cube);

        camera.position.z = 5;

        // Add clickable links to the cube
        const raycaster = new THREE.Raycaster();
        const mouse = new THREE.Vector2();

        const links = [
          { face: 0, url: '/' }, // Front face - Home
          { face: 1, url: '/library/' } // Back face - Prompt Library
        ];

        function onMouseClick(event) {
          mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
          mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;

          raycaster.setFromCamera(mouse, camera);
          const intersects = raycaster.intersectObject(cube);

          if (intersects.length > 0) {
            const faceIndex = intersects[0].faceIndex;
            const link = links.find(link => link.face === Math.floor(faceIndex / 2));
            if (link) {
              window.location.href = link.url;
            }
          }
        }

        window.addEventListener('click', onMouseClick);

        // Animation loop
        function animate() {
          requestAnimationFrame(animate);
          cube.rotation.x += 0.01;
          cube.rotation.y += 0.01;
          renderer.render(scene, camera);
        }
        animate();

        // Adjust canvas on window resize
        window.addEventListener('resize', () => {
          camera.aspect = window.innerWidth / window.innerHeight;
          camera.updateProjectionMatrix();
          renderer.setSize(window.innerWidth, window.innerHeight);
        });
      });
    </script>
  </body>
</html>